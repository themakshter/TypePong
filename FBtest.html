<html>

<div id="fb-root"></div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript">

window.fbAsyncInit = function() {

    FB.init({

        appId      : '549578998463425',

        status     : true,

        cookie     : true,

        xfbml      : true,

        oauth      : true

    });

    FB.Event.subscribe('auth.login', function(response) {

        window.location.reload();

    });

    FB.Event.subscribe('auth.logout', function(response) {

        window.location.reload();

    });

function handleResponse(response){

    if (response.status ==='connected'){
        var id =response.authResponse.userID;
        $('#facebookID').attr("value", id);//set the value of the inupt field FBID to id
        $('#redirect').click();//click the redirect button


        
        // window.location.href = url;

    }
}

FB.getLoginStatus(handleResponse);
    
};

(function(d){

    var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}

    js = d.createElement('script'); js.id = id; js.async = true;

    js.src = "https://connect.facebook.net/en_US/all.js";

    d.getElementsByTagName('head')[0].appendChild(js);

}(document));



</script>

<div class="fb-login-button">Login</div>
<form action="http://localhost:8080/_facebookLogin" method="GET">
<!-- TODO fix local host in the above -->
<input id="facebookID" name="facebookID" =type="text" hidden>
<button id="redirect" type="submit" hidden>F</button>


</form>



</html>